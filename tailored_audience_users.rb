# frozen_string_literal: true
# Copyright (C) 2015 Twitter, Inc.

require 'twitter-ads'
include TwitterAds::Enum

CONSUMER_KEY        = 'DRbmz6DzIBzwXot02nWBUpDkM'.freeze
CONSUMER_SECRET     = 'E3XmUgr0iQQ3EzmYyEp5BmLBS0GhAVedmvdYPA5NV30yDYcgA4'.freeze
ACCESS_TOKEN        = '3271358660-vOzJJdYufT8ERqJFRqZVbrqkiUW0QENkMnowRl8'.freeze
ACCESS_TOKEN_SECRET = 'J0IEj4ZxdhPcJ0CVqZ4NLmRwv3mViWl3jjp4T50wnLBPJ'.freeze
ADS_ACCOUNT         = '18ce54bgxky'.freeze

# initialize the twitter ads api client
client = TwitterAds::Client.new(
  CONSUMER_KEY,
  CONSUMER_SECRET,
  ACCESS_TOKEN,
  ACCESS_TOKEN_SECRET
)

# load up the account instance
account = client.accounts(ADS_ACCOUNT)

# create a new tailored audience
audience =
  TwitterAds::TailoredAudience.create(account,'test ruby TA')

# check the processing status
audience.status

# test users hash
users_params = [{operation_type: 'Update',
  params: {users: [{email: ['002bd26e7ed79f6bf94b57486a0194cdfacfadf9dae00c2dc5415e984de081d5']
},{email: ['002bfcfffb9838fa2446da790d2b123a3efae1b900ea27969280c4f6fc477b45']
},{email: ['002c12b00b3d59f247351d0c6ddb5735707dc3f7dadf01cd3f91accff3df4e88']
},{email: ['002c22a36306a0e92c1b562d38a190eb9be74a4a75d064c998beea760e89c16b']
},{email: ['002c23faf7c29910c455aeb34a62a4a94ec83091ccae9cef38c2b844c3b5d1d4']
},{email: ['002c349a5eb856f30d5248aebee4eb0b20a5fbba7733dfa237055fe8e6fc9f54']
},{email: ['002c4c98283c777af93453b608e5df632de760ab05409b015e3f7292466ddec7']
},{email: ['002c50fac9f7c2ef705bfb0dd1e2cfee25c8f9448667ac56722f97e693a9e540']
},{email: ['002c578e7317870414c774f28e44fed61de8572b5aa288e93761f90de17f103b']
},{email: ['002c584e4224605be4ff4601355d9e07c26e13ae867103bb0927999b88763f3e']
},{email: ['002c6739d94f7dea074401c00d8ed3a7d0bb071687a52edf937851783fb3d81c']
},{email: ['002c6e377a0191422f125ebf60f9b99b73ebfa53398001d89301094c79775e60']
},{email: ['002c83041fdda59f2a8373d0ab6711c19357e12d2590485f36cf4ad13d402004']
},{email: ['002c9ae1f8f09aa51e8c5dc4901fd6523cfb45b471d92f66df14cbbd23ce1820']
},{email: ['002caf26cc9e93638e2a0ed528afa767e769e6c984be19ad523b65e947fc5512']
},{email: ['002cafc7cca3913b2c144b3917f831c1b015e50948bf03d4fc90b77520f2bfea']
},{email: ['002cda7e96c7adb18e6200850de4fb01058356a2a4b27ddf5967596777d27b3a']
},{email: ['002d0920fe448e038c4b0481e4a8d2e3adaf141704d8b64011cae605324adae0']
},{email: ['002d221c1d11361bffe3873206be8282e24ed1283851b4e3aab8ad30b927aeeb']
},{email: ['002d248b91a39b2dfdac02845cb7e988975d1784802137311f10ddfa9bc9d4ec']
},{email: ['002d25290bfe82ba64f769d8198ea328524c6f928f0c179322f212394ef57c15']
},{email: ['002d27bf23b7c525bc74af2a5b141e5a2943d39f8a00054f4b4fd58c86c9188a']
},{email: ['002d2a9352e7a92bc5ea48c7272de65a98f2a4be371aab4a7026c3903c9404e9']
},{email: ['002d2efe2c5db0caaf2338ee3af0b769052f04a49592bbeabae3ab5af0919ba0']
},{email: ['002d4f94bdea96f8235cfcdae4281c77500c21d3afbe4cdb712792709bcaee63']
},{email: ['002d53cb7d50a9e85db061743f0094409d59b24ae4dcd8f48eb0a65e567f2b0e']
},{email: ['002d5467e260d14d7a67ccb7bd92a4d93f779736eb14d64e20515d6416925c23']
},{email: ['002d6ad599a9978154e272cea4703d5acf8e07a792e91beda95880afb0de02c5']
},{email: ['002d8d871634641023885abd6c9e0050c6784594293a14b77f0839839f414324']
},{email: ['002d9249883144801abe50d76fc00fb4a874cfcfc9ca484b598abdb836044a97']
},{email: ['002d93cbdc3216534c5fd7d341b1213d35425901858e2ac6b8052d41e685ab8e']
},{email: ['002d97c5d204fb88d68c6c3c00f5d04555418d3f6a5ba429edcf5cb3679c5938']
},{email: ['002dbb5c287ed915cb20e0c268369743d1132b2179ba41ef48232076e824ffed']
},{email: ['002dcb0c9a3c71f51512a1dea7913ab4ea0b73bf7484274f0896801b2bf2b2ce']
},{email: ['002dcfe02253c885ac221b32e211021293ac5497ce31860d26a23cd279bb7689']
},{email: ['002de44a1a7de9879676556096c95aaa143d460d82b79f062d8b27f6c12f1986']
},{email: ['002e03928ccf6abf788bf17ff1db96a8695fe2cea1ce9b8548f0ff082e6765fd']
},{email: ['002e08dfe21ef7c737951e92767021de2bd401b4b5c800274a85d44d07c5ed0b']
},{email: ['002e120a6702aaa97b8d9eb9589af45e9c992b365ca7f8293db68e4b8ee2fa67']
},{email: ['002e2d27d51f333a6c04623eb472573e1de1932c991c5e40256569f3345e2ff4']
},{email: ['002e3580da4ff1f7d078e35db5095fb91d5f28843c071a6f4979463e22612c72']
},{email: ['002e51f00c9bc6f3c4f2ee0020d8fd42b923e3156c81714e60889d9739e27144']
},{email: ['002e6a2b54895b25f2045766b202a81fcbf5158d1062c68898ae38d88deeda41']
},{email: ['002e6ae8b8a61acde433a602c7bbb739d98cb1744760074d18371ceb827ebe3d']
},{email: ['002e6b0de1e33828db50e6d8a659a3cd3b138c490abaaa2fd5f6a4aded072056']
},{email: ['002e71b4f411dd3a824b09b2616a150335a16c6317bd68460b78691c82a1393d']
},{email: ['002ea7da3f2cfd6390f22f540ee26d5c76f1de26722927c3b70edb16332d419d']
},{email: ['002eaa5fa3c2c309830b7cf30e5d707eda6316df6ebad3eef3461515a081b328']
},{email: ['002ee0067befd61b4ea65d80e1c12d26dd7a6182c522bdb9c8deabaae597e59a']
},{email: ['002eed327610f54ec28b73d8cd2771c0f625e736af9568f40e3d904b8091407e']
},{email: ['002eefcd10d9b46ed9ecd6ebe1f81834bda60c5b07e3cf52c33038f8398f54fe']
},{email: ['002f01609091c6296c18324a9337464cc0d928811f1b11d30562a7ec8e396ad6']
},{email: ['002f02b111316b0d278c2557ffa18d87cacba9dba7045a2f88a625ce2319f007']
},{email: ['002f27417af1f84d26c87cb5396d6877634404c1cbe5d7a02216482c0970ba04']
},{email: ['002f49db0eefed5cf1a7158e33515c9c812f1725f565000fadb2963a35e250bf']
},{email: ['002f58062d7a9c7d5bbc0478dc5f4efd65668e69d3653dbc8b2612d3e7d970b8']
},{email: ['002f5da60e398c3901d608d1c93b4afdac2275a5286b0960b9e6efdba7fa3c05']
},{email: ['002f76b61607f0087fbbbbf5fdcfe20063900b57dd38c995093f814984e47257']
},{email: ['002f848dcac81a7d299a4bcef66027352aa8e144b613e22d951a12a9a22b8caa']
},{email: ['002f9d7274bd6f8e942eb3860821803a8658dd4ba36cc1063b5506e8330c54b1']
},{email: ['002f9e11951e652b245d6c1b5d5aca30da8ab06cab09bf979c1e76cc429728d2']
},{email: ['002fe626b4dcedeb63536090018c7504f68bf5b916778ba22ebf030d8ab934c5']
},{email: ['002fea32a14b5295913907c6e4486e5a2e1496a2540213c7b251708c63f86dc8']
},{email: ['002fed5d1817a149e071afae5966074a0fd801a5b464f713bc72e51a25f151b5']
},{email: ['0030137bc512131005afee3d3c84a1753d6b1c75e0e812f9f0bf30a817500aae']
},{email: ['003016def128871e0ef2828a0fb3372ac3191270011bd7fee82a1c5ad83ed0d9']
},{email: ['0030179c952abbb722fac9a4ead9a23b0bd3481abfa6a608abb7ee139af6cd1c']
},{email: ['003018ba5793887a1b587025467ef51679da1671f5d0018a1af69f8d7f8344f6']
},{email: ['00301a8061fcffd2a751446e56ccb30b36c0145e3283e4c8651ce5af9800db6a']
},{email: ['003020f152d74ea53bbb2f1d76343fb5bd2392c739f88ebdaec76dcd1785f34e']
},{email: ['00302565aa58636c5132a8383e3ec51e8dbb236dfee31ded847f87335ed1e426']
},{email: ['003031afd46d01d43620ad00d41ddfa95629c6c8421070e18125b28305f87a2f']
},{email: ['003049c65c6d4c3f5d37c9e60b8f5d87619e73ba00daadd3c90250693b5b8a6e']
},{email: ['00305a1b1086ed61bf3e094008098f5bbeaedb2a8367a5eeb89725b2e60f401c']
},{email: ['00307a9bdef40557757aa89bb6d3906755deed2bf8eddf2d81b38b1c04d54238']
},{email: ['00307e07c664f014120a41677401e32c6bb711fba27062bca361519c36498fc7']
},{email: ['00307f2897bd12cc9d3143b111216eb054703d32db0fafde50fd1a5d0e239adc']
},{email: ['003089e338baa8fccba4c93c457ef8cda9fe43d6b14830c835fed740d8493a5b']
},{email: ['00309a8b366c94e23860ff6800553b3bbe2e47000ab351f7a984508409c50b35']
},{email: ['0030c1c673045ff3afb1c528d77392dee40dbec72c35b7b4e19a588372fe79a5']
},{email: ['0030e2e2ef05aa6109e630796106aeffa97326469d827f1ece1968b714c8acb9']
},{email: ['0030f409845162d26092e39511f4ed3cb452a2805097e8fe9822e5cd0fca3d60']
},{email: ['0030fccab960ebca8dbcd926a8f35fc2e94cfe5ba9a288db1501b33689068753']
},{email: ['003109337d436a2ab78c70bc42821b08903901ee1bba6c413e88087ed69e64c5']
},{email: ['003124e484fdbbf001af78a7c16456574120d6af7a1ace8cdb2844d323d85ab8']
},{email: ['003127d61dd54ba81c42ac65bf1aac328fad2663b9c496510ba28fedc302f3ab']
},{email: ['003129360e406f316e5cbcf617f511aa073ece7a881a757e4fdd3adec27affb3']
},{email: ['00314ec0cb567add55dbdae72dd371967fdfa2f9e0653ed8c81a81481d81beed']
},{email: ['00316cec7726824642d4d91c77e14d75a29ca39c7b74ab2348a336f236fbd499']
},{email: ['003171c500d5110f9c200d118e29b7fb22d8e7a4ffd43f393643d13bd7285a8e']
},{email: ['0031721fe5d5b507c8bf1376f1d9784d23154520f7c5f3426dd659ede4993b71']
},{email: ['0031c6d02f7eea88ec2012f1c28f2aa12c6e6220e423df3af85908cca48be1c5']
},{email: ['0031c831be7acc0ce877605f1522b25558dc7a80a11083374c15dcb73c957bc5']
},{email: ['0031cc99398d94dc4813923f313fead39e3d06155d270c210d400fb1382bd8e5']
},{email: ['0031d0b4e5b193bf977c95cebf17b8598d8fbffb14cdafb5c4d164dbbbdfcda5']
},{email: ['0031df36309ae7aa1d517f3093aeba72f546ba04b4f0ad2fca330f8ae09cf353']
},{email: ['003219109a9bb7cf6ebad3420d1fbffa4d11b94ae8a8f1e1609227a0a69d2b9e']
},{email: ['003230bee6fcab663ae72a96fe41c2f8e00955a67c532062010ff17525b9b12b']
},{email: ['003231c17b45da0475a0cc2be1642f67a5c904469bdf9d6162c9b2fb15127ea8']
},{email: ['0032410853bc9b957a25d36ef9a9e696a522776e973a8d71220a5bcd954baea2']
},{email: ['00324161c21e02c09139fac576c59dc4e814d47a1ae68dcb504f3fa7bdb4f956']
},{email: ['0032572977777349984aafa8635e52d3767b4072445508fcf579cf2fadc06fb3']
},{email: ['0032582bd9d59ff5deec33a4e2c1e4d085a4b0cf59127c2d79924fdfe5583395']
},{email: ['003265ee24eb01f32d30c01cfda11e607791dfa0f00835e88c892c787f0553d0']
},{email: ['003266348b751816bf8338db9d85266222f96fd93324d2707cca063a2224dfaa']
},{email: ['003266aad7403ee0447855cba23c9a001457fe71f7917fc057a541d926746b0f']
},{email: ['003283df67ca14cb8face28c1681a03d9d59d7d76494126b5fe0d65127d1820e']
},{email: ['00328eeb076362e036c834aad63a15b8d03ffe4f1699025a69555b2008185723']
},{email: ['00328fdda74aee38f06fb85da97cb4d8bc022d4c38dc35cac0d8f5e804eddf5f']
},{email: ['003298a40250e8d3bc2182149d3963ac382ce1ac348ba7203270f66d2d34db39']
},{email: ['0032b3c985bc3e6b18d97c266aa361a4514bcb5beb3cacd760b0e569efd1c942']
},{email: ['0032c65ce4a39faf3e2c0262e22cece64d59c75c6fa997cc1c62b99ebdaa683a']
},{email: ['0032cb55d746dbc95a3c6da83a89f9580ee4737f15de90b2a2a24c1116b44150']
},{email: ['0032cd48479eabf74a44cd237c8920b05063e2c86a3258df0cd989d242cc8ae2']
},{email: ['0032d8f91153a5a93945f7522a749686c63aedb83cc6f88e4231ae0dd3cd7c7b']
},{email: ['0032e043073bddcda458e65b8cb38f1e77ef0885961729802eadab0bb7773cb3']
},{email: ['0032f65953c167246b8d9f6fd5f8615e8e79f4058be360a4332ac1e72e3775cd']
},{email: ['0032fff21133d066196ede702f0ef1e6178df952260e015f4db5174cd8a723c2']
},{email: ['00330566b5db2333a899c4dab65646b0f30c0e22ff54402891cd7155b299649d']
},{email: ['00330693e2b188ff13ce0e0718f62828319b0f84afdb07a9e620456db2df0e1f']
},{email: ['00330d23f8d2d7bc9ff550776f50e716d9b3e359e2ad09e5dea6b98d261c1697']
},{email: ['00331cc221f5ceaf12f3ccc89f9aefc1dc854b3121f9bc1ad8167751fa127036']
},{email: ['00331d898df09daa1c62133b524c9e9d5999b3ea1149f55087106a51d32baefd']
},{email: ['003345e493e692ca8a1dcf1338dc8505b53857b3df4523a4cb7766464670b842']
},{email: ['00335e8b2ea2109b103ed0668255230b3e37e4d7f78dbb717571b06b83b4546c']
},{email: ['00336896cfaaf7993f04eb9289f5c3c1bb3e01fd92c9f898fe718c7b890bd0b3']
},{email: ['0033697b746be83bdac2a44f75672abf060761bdec63d215788ab78a18f55521']
},{email: ['0033754892d041d33424459d099d8f90ab1dddb69e5a6f20582ea44d1e2935d1']
},{email: ['003377294e7bd9c3631c111bf15c94de43099c1cf991c07f1a2f255def484e42']
},{email: ['003378672847ac1ebd11e0d3f46953e4bd34ef6f0a056226291abde39297f208']
},{email: ['00337f99bd61dca278f7eecd355c18a8687c996e0a8ab0f7883058b7e244f4a2']
},{email: ['0033804a25f4e251a01bca7efba2b7423c557c8333bc24fd52740bc61adf8796']
},{email: ['0033891145695645cae766a32ba71e2d24e06059fffb9b240599ab9a35c4c5f3']
},{email: ['0033a078ed4d46dafcec508a5cb3434552e11c73c4bd94dccce5bf25de57d5df']
},{email: ['0033a3e22b7510ca009237b3f798ae15ee1adc29c10b417c609de2c86b5824da']
},{email: ['0033aa0bdc494229868c2b9ec065f9e9a09dc7233df70d99c9179e5e03c19b3d']
},{email: ['0033b1c7206cf9e5fa6c40abf841c61a74facccdca5f5b5c08d3c2c799f2ba9a']
},{email: ['0033bc0f1848a0b3dde9fb8c11c69e6a7010252fc5856ae0fcb353802933abad']
},{email: ['0033c6df12f0925372014f1668406d0409158e1c096887f4772116cec69965c0']
},{email: ['0033d374c0658bf50cd5d6c4f9eab432b48e60851771eddce9e8bfa41ab0b405']
},{email: ['003428d8d6aca2488ca72197d8b8b15e7c4c8db6d85d9bbabaee7e6a0eb86777']
},{email: ['00345d14fecad4e38650c04638000d6e494c3f4730c8f6fb07c8a15d9da95115']
},{email: ['003463f44687d3ea2a47c57c328a23c5c2aa7c2a2225f3b61f1be203fd5c18bf']
},{email: ['0034792983b1a3c252af957891d16070fb64514d86916115ab2c29a39baf8aaa']
},{email: ['003479ed81cc39e840590fb58825f7a52cc1e5fefddda47512e6c665991e0230']
},{email: ['0034934c0da828698a68cb693f11d600c0163e34c8c0832c22ef70eb3c61519b']
},{email: ['00349d2a7c1f3aa94b92fdc3db455213a2706651a781a23350baa41670e7c198']
},{email: ['00349e6999d91334408379c1a497c2e9187a470b3397fd712fbd0102457aeb8d']
},{email: ['0034a62e6ef8da5c3dbf7c93b5e4ae042f5168a4a2de4c22ee1871ab8374390e']
},{email: ['0034c23ec6e7dfa7460d0d3f3405ec0bdfc6d5e763bfc5808ab7fd618206a36f']
},{email: ['0034d5549f348b2bb2948fe5bd048ce5cedfb6b3a073c8d7ca245f15fe5d7170']
}]
}
}]

# update the tailored audience
success_count, total_count = audience.users(account, users_params)

if success_count == total_count then
	print "Successfully added #{total_count} users"
end

# delete the tailored audience
#audience.delete!
